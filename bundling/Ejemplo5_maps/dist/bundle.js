(()=>{"use strict";class e{constructor(){this.loadPromise=null,this.isLoaded=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}load(e){return n=this,t=void 0,i=function*(){if(!this.isLoaded){if(this.loadPromise)return this.loadPromise;this.loadPromise=this.initializeGoogleMaps(e),yield this.loadPromise,this.isLoaded=!0}},new((o=void 0)||(o=Promise))(function(e,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o(function(e){e(t)})).then(s,r)}l((i=i.apply(n,t||[])).next())});var n,t,o,i}initializeGoogleMaps(e){return new Promise((n,t)=>{if(window.google&&window.google.maps)return this.isLoaded=!0,void n();const{key:o,version:i="weekly",language:a="es",region:s="AR"}=e,r=document.createElement("script");r.src=`https://maps.googleapis.com/maps/api/js?key=${o}&v=${i}&language=${a}&region=${s}&callback=initGoogleMaps`,r.async=!0,r.defer=!0,console.log(r.src),window.initGoogleMaps=()=>{delete window.initGoogleMaps,this.isLoaded=!0,n()},r.onerror=()=>{delete window.initGoogleMaps,t(new Error("Failed to load Google Maps"))},document.head.appendChild(r)})}}class n{constructor(){this.map=null,this.markers=[],this.infoWindows=[],this.loader=e.getInstance()}initialize(e,n,t){return o=this,i=void 0,s=function*(){var o,i,a,s;yield this.loader.load(n);const r=document.getElementById(e);if(!r)throw new Error(`Element with ID "${e}" not found`);this.map=new window.google.maps.Map(r,{center:t.center,zoom:t.zoom,mapId:t.mapId,mapTypeId:t.mapTypeId||"roadmap",disableDefaultUI:t.disableDefaultUI||!1,zoomControl:null===(o=t.zoomControl)||void 0===o||o,mapTypeControl:null===(i=t.mapTypeControl)||void 0===i||i,streetViewControl:null===(a=t.streetViewControl)||void 0===a||a,fullscreenControl:null===(s=t.fullscreenControl)||void 0===s||s,styles:t.styles})},new((a=void 0)||(a=Promise))(function(e,n){function t(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(n){var o;n.done?e(n.value):(o=n.value,o instanceof a?o:new a(function(e){e(o)})).then(t,r)}l((s=s.apply(o,i||[])).next())});var o,i,a,s}getMap(){return this.map}setCenter(e){this.map&&this.map.setCenter(e)}setZoom(e){this.map&&this.map.setZoom(e)}addMarker(e){if(!this.map)return null;const n=new window.google.maps.Marker({position:e.position,map:this.map,title:e.title,icon:e.icon,draggable:e.draggable||!1,animation:e.animation?window.google.maps.Animation[e.animation.toUpperCase()]:void 0});return this.markers.push(n),n}addInfoWindow(e,n){const t=new window.google.maps.InfoWindow({content:e.content,position:e.position,maxWidth:e.maxWidth||300});return n&&n.addListener("click",()=>{this.infoWindows.forEach(e=>e.close()),t.open(this.map,n)}),this.infoWindows.push(t),t}clearMarkers(){this.markers.forEach(e=>e.setMap(null)),this.markers=[]}clearInfoWindows(){this.infoWindows.forEach(e=>e.close()),this.infoWindows=[]}fitBounds(e){if(!this.map||0===e.length)return;const n=new window.google.maps.LatLngBounds;e.forEach(e=>n.extend(e)),this.map.fitBounds(n)}addClickListener(e){this.map&&this.map.addListener("click",e)}geocodeAddress(e){return new Promise((n,t)=>{window.google?(new window.google.maps.Geocoder).geocode({address:e},(e,t)=>{if("OK"===t&&e&&e[0]){const t=e[0].geometry.location;n({lat:t.lat(),lng:t.lng()})}else n(null)}):t(new Error("Google Maps not loaded"))})}}class t{}t.BUENOS_AIRES={center:{lat:-34.6037,lng:-58.3816},zoom:14,mapId:"BUENOS_AIRES_MAP"},t.DARK_THEME=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]}],t.MINIMAL_UI={disableDefaultUI:!0,zoomControl:!0};var o=function(e,n,t,o){return new(t||(t=Promise))(function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(s,r)}l((o=o.apply(e,n||[])).next())})};class i{constructor(){this.managers=new Map}createMap(e,i){return o(this,arguments,void 0,function*(e,o,i={}){const a={key:o,version:"weekly",language:"es",region:"AR"},s=Object.assign(Object.assign({},t.BUENOS_AIRES),i),r=new n;return yield r.initialize(e,a,s),console.log(e),this.managers.set(e,r),r})}getManager(e){return this.managers.get(e)}createMapWithMarkers(e,n,t){return o(this,arguments,void 0,function*(e,n,t,o={}){const i=yield this.createMap(e,n,o);return t.forEach(e=>{const n=i.addMarker(e);n&&e.infoWindow&&i.addInfoWindow({content:e.infoWindow},n)}),t.length>1&&i.fitBounds(t.map(e=>e.position)),i})}static get Configurations(){return t}static quickInit(e,n,a){return o(this,arguments,void 0,function*(e,n,o,a=14){return(new i).createMap(e,n,{center:o||t.BUENOS_AIRES.center,zoom:a})})}}var a=function(e,n,t,o){return new(t||(t=Promise))(function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(s,r)}l((o=o.apply(e,n||[])).next())})};"undefined"!=typeof window&&(window.GoogleMapBundle=i),document.addEventListener("DOMContentLoaded",()=>a(void 0,void 0,void 0,function*(){yield function(){return a(this,void 0,void 0,function*(){const e=document.getElementById("maps"),n=e,t="API_KEY",o=parseFloat(n.dataset.lat||"-34.6037"),a=parseFloat(n.dataset.lng||"-58.3816"),s=parseInt(n.dataset.zoom||"14");if(t&&e&&e.id)try{yield i.quickInit(e.id,t,{lat:o,lng:a},s)}catch(n){console.error("Auto-init failed for",e.id,n)}})}()}))})();