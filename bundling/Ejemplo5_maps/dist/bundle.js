(()=>{"use strict";class e{constructor(){this.loadPromise=null,this.isLoaded=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}load(e){return n=this,o=void 0,i=function*(){if(!this.isLoaded){if(this.loadPromise)return this.loadPromise;this.loadPromise=this.initializeGoogleMaps(e),yield this.loadPromise,this.isLoaded=!0}},new((t=void 0)||(t=Promise))(function(e,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(n){var o;n.done?e(n.value):(o=n.value,o instanceof t?o:new t(function(e){e(o)})).then(s,r)}l((i=i.apply(n,o||[])).next())});var n,o,t,i}initializeGoogleMaps(e){return new Promise((n,o)=>{if(window.google&&window.google.maps)return this.isLoaded=!0,void n();const{key:t,version:i="weekly",language:a="es",region:s="AR"}=e,r=document.createElement("script");r.src=`https://maps.googleapis.com/maps/api/js?key=${t}&v=${i}&language=${a}&region=${s}&callback=initGoogleMaps`,r.async=!0,r.defer=!0,console.log(r.src),window.initGoogleMaps=()=>{delete window.initGoogleMaps,this.isLoaded=!0,n()},r.onerror=()=>{delete window.initGoogleMaps,o(new Error("Failed to load Google Maps"))},document.head.appendChild(r)})}}class n{constructor(){this.map=null,this.markers=[],this.infoWindows=[],this.loader=e.getInstance()}initialize(e,n,o){return t=this,i=void 0,s=function*(){var t,i,a,s;yield this.loader.load(n);const r=document.getElementById(e);if(!r)throw new Error(`Element with ID "${e}" not found`);this.map=new window.google.maps.Map(r,{center:o.center,zoom:o.zoom,mapId:o.mapId,mapTypeId:o.mapTypeId||"roadmap",disableDefaultUI:o.disableDefaultUI||!1,zoomControl:null===(t=o.zoomControl)||void 0===t||t,mapTypeControl:null===(i=o.mapTypeControl)||void 0===i||i,streetViewControl:null===(a=o.streetViewControl)||void 0===a||a,fullscreenControl:null===(s=o.fullscreenControl)||void 0===s||s,styles:o.styles})},new((a=void 0)||(a=Promise))(function(e,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function r(e){try{l(s.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a(function(e){e(t)})).then(o,r)}l((s=s.apply(t,i||[])).next())});var t,i,a,s}getMap(){return this.map}setCenter(e){this.map&&this.map.setCenter(e)}setZoom(e){this.map&&this.map.setZoom(e)}addMarker(e){if(!this.map)return null;const n=new window.google.maps.Marker({position:e.position,map:this.map,title:e.title,icon:e.icon,draggable:e.draggable||!1,animation:e.animation?window.google.maps.Animation[e.animation.toUpperCase()]:void 0});return this.markers.push(n),n}addInfoWindow(e,n){const o=new window.google.maps.InfoWindow({content:e.content,position:e.position,maxWidth:e.maxWidth||300});return n&&n.addListener("click",()=>{this.infoWindows.forEach(e=>e.close()),o.open(this.map,n)}),this.infoWindows.push(o),o}clearMarkers(){this.markers.forEach(e=>e.setMap(null)),this.markers=[]}clearInfoWindows(){this.infoWindows.forEach(e=>e.close()),this.infoWindows=[]}fitBounds(e){if(!this.map||0===e.length)return;const n=new window.google.maps.LatLngBounds;e.forEach(e=>n.extend(e)),this.map.fitBounds(n)}addClickListener(e){this.map&&this.map.addListener("click",e)}geocodeAddress(e){return new Promise((n,o)=>{window.google?(new window.google.maps.Geocoder).geocode({address:e},(e,o)=>{if("OK"===o&&e&&e[0]){const o=e[0].geometry.location;n({lat:o.lat(),lng:o.lng()})}else n(null)}):o(new Error("Google Maps not loaded"))})}}class o{}o.BUENOS_AIRES={center:{lat:-34.6037,lng:-58.3816},zoom:14,mapId:"BUENOS_AIRES_MAP"},o.DARK_THEME=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]}],o.MINIMAL_UI={disableDefaultUI:!0,zoomControl:!0};var t=function(e,n,o,t){return new(o||(o=Promise))(function(i,a){function s(e){try{l(t.next(e))}catch(e){a(e)}}function r(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o(function(e){e(n)})).then(s,r)}l((t=t.apply(e,n||[])).next())})};class i{constructor(){this.managers=new Map}createMap(e,i){return t(this,arguments,void 0,function*(e,t,i={}){const a={key:t,version:"weekly",language:"es",region:"AR"},s=Object.assign(Object.assign({},o.BUENOS_AIRES),i),r=new n;return yield r.initialize(e,a,s),console.log(e),this.managers.set(e,r),r})}getManager(e){return this.managers.get(e)}createMapWithMarkers(e,n,o){return t(this,arguments,void 0,function*(e,n,o,t={}){const i=yield this.createMap(e,n,t);return o.forEach(e=>{const n=i.addMarker(e);n&&e.infoWindow&&i.addInfoWindow({content:e.infoWindow},n)}),o.length>1&&i.fitBounds(o.map(e=>e.position)),i})}static get Configurations(){return o}static quickInit(e,n,a){return t(this,arguments,void 0,function*(e,n,t,a=14){return(new i).createMap(e,n,{center:t||o.BUENOS_AIRES.center,zoom:a})})}}var a=function(e,n,o,t){return new(o||(o=Promise))(function(i,a){function s(e){try{l(t.next(e))}catch(e){a(e)}}function r(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o(function(e){e(n)})).then(s,r)}l((t=t.apply(e,n||[])).next())})};"undefined"!=typeof window&&(window.GoogleMapBundle=i),document.addEventListener("DOMContentLoaded",()=>a(void 0,void 0,void 0,function*(){console.log("Inicializando mapa...");const e=new i;try{yield e.createMap("maps","TU_API_KEY_AQUI",{center:{lat:-32.4845,lng:-58.2307},zoom:13}),console.log("Mapa inicializado correctamente")}catch(e){console.error("Error al inicializar el mapa:",e)}!function(){a(this,void 0,void 0,function*(){const e=document.getElementById("maps"),n=e,o="AIzaSyA9MXYqx7NPhuZV-0FUmGQkUxCKyd8jBh4",t=parseFloat(n.dataset.lat||"-34.6037"),a=parseFloat(n.dataset.lng||"-58.3816"),s=parseInt(n.dataset.zoom||"14");if(o&&e&&e.id)try{yield i.quickInit(e.id,o,{lat:t,lng:a},s)}catch(n){console.error("Auto-init failed for",e.id,n)}})}()}))})();